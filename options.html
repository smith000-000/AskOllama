<!-- options.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Ollama Helper Settings</title>
    <link rel="stylesheet" href="options.css">
</head>
<body>
    <h1>Ollama Helper Settings</h1>
    
    <div class="form-group">
        <label for="ollamaAddress">API Endpoint URL:</label>
        <input type="text" id="ollamaAddress" placeholder="http://localhost:11434">
        <button id="testConnection">Test Connection</button>
    </div>

    <div class="form-group">
        <label>Provider:</label>
        <label>
            <input type="radio" name="provider" value="local_ollama" checked> Local Ollama
        </label>
        <label>
            <input type="radio" name="provider" value="external_compatible"> External API (OpenAI-compatible)
        </label>
        <label>
            <input type="radio" name="provider" value="openai_direct_api_key"> OpenAI Direct API Key
        </label>
        <label>
            <input type="radio" name="provider" value="openrouter_api_key"> OpenRouter API Key
        </label>
        <label>
            <input type="radio" name="provider" value="codex_oauth"> Codex OAuth
        </label>
    </div>

    <div class="form-group" id="apiKeyGroup" style="display: none;">
        <label for="apiKey">API Key:</label>
        <input type="password" id="apiKey" placeholder="Enter API Key (optional)">
    </div>

    <div class="form-group" id="oauthGroup" style="display: none;">
        <label>Codex OAuth:</label>
        <div class="button-group">
            <button id="codexSignIn">Sign In</button>
            <button id="codexSignOut">Sign Out</button>
        </div>
        <div id="oauthStatus" class="oauth-status">Not signed in</div>
    </div>

    <div class="form-group" id="oauthAdvancedGroup" style="display: none;">
        <div id="oauthSetupHint" class="oauth-hint">
            Codex OAuth requires a pre-provisioned OAuth client. Redirect URI: <code id="oauthRedirectUri"></code>
        </div>
        <label for="oauthClientId">OAuth Client ID:</label>
        <input type="text" id="oauthClientId" placeholder="Enter OAuth client ID">
        <label for="oauthAuthUrl">OAuth Authorize URL:</label>
        <input type="text" id="oauthAuthUrl" placeholder="https://auth.openai.com/oauth/authorize">
        <label for="oauthTokenUrl">OAuth Token URL:</label>
        <input type="text" id="oauthTokenUrl" placeholder="https://auth.openai.com/oauth/token">
        <label for="oauthScope">OAuth Scopes (space-separated):</label>
        <input type="text" id="oauthScope" placeholder="openid profile email offline_access">
    </div>

    <div class="form-group">
        <label for="modelSelect">Model:</label>
        <input type="text" id="modelSearch" placeholder="Type to filter models...">
        <select id="modelSelect" disabled>
            <option value="">Please test connection first</option>
        </select>
    </div>

     <div class="form-group">
        <label>
            <input type="checkbox" id="useInternet"> Enable Internet Search (supported on OpenWebUI-compatible and OpenRouter providers)
        </label>
    </div>

    <div class="form-group">
        <label for="systemPrompt">System Prompt:</label>
        <textarea id="systemPrompt" placeholder="Enter your system prompt here..."></textarea>
    </div>

    <div class="form-group">
        <label for="testPrompt">Test Prompt:</label>
        <textarea id="testPrompt" placeholder="Enter a test prompt here..."></textarea>
        <button id="testChat">Test Chat</button>
    </div>

    <div class="form-group">
        <label>Response:</label>
        <div id="chatResponse" class="response-box"></div>
    </div>

    <div class="button-group">
        <button id="save">Save Settings</button>
    </div>
    
    <div id="status"></div>
    <div id="fullErrorDetails" class="error-details-box" style="display: none;"></div>

    <script src="options.js"></script>
</body>
</html>
